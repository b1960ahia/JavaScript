<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <title>Gerador de Ícones - Loto</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:system-ui,Segoe UI,Arial,sans-serif;margin:24px;background:#fafafa;color:#111}
    .panel{background:#fff;border:1px solid #eee;border-radius:8px;padding:16px;max-width:900px}
    label{display:block;margin:8px 0 4px;font-weight:600}
    input[type=text]{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .col{flex:1 1 260px}
    button{background:#2196f3;color:#fff;border:none;border-radius:6px;padding:10px 14px;font-weight:700;cursor:pointer}
    canvas{background:#f7f7f8;border-radius:8px;border:1px solid #eee}
    .preview{display:flex;gap:16px;align-items:center;flex-wrap:wrap;margin-top:12px}
    .note{font-size:13px;color:#555}
  </style>
</head>
<body>
  <div class="panel">
    <h1>Gerar Ícones PNG (192 e 512)</h1>
    <div class="row">
      <div class="col">
        <label>Texto (monograma)</label>
        <input id="texto" type="text" value="JB Analise Loto" />
      </div>
      <div class="col">
        <label>Cor de fundo</label>
        <input id="bg" type="text" value="#8BC34A" />
      </div>
      <div class="col">
        <label>Cor do texto</label>
        <input id="fg" type="text" value="#ffffff" />
      </div>
    </div>
    <div style="margin-top:12px" class="row">
      <div class="col"><button id="gerar">Gerar / Atualizar</button></div>
      <div class="col note">Dica: o ícone usa as iniciais do texto (ex.: "JB").</div>
    </div>

    <div class="preview">
      <div>
        <div class="note">icon-192.png</div>
        <canvas id="c192" width="192" height="192"></canvas>
        <div style="margin-top:6px"><button id="dl192">Baixar 192</button></div>
      </div>
      <div>
        <div class="note">icon-512.png</div>
        <canvas id="c512" width="512" height="512"></canvas>
        <div style="margin-top:6px"><button id="dl512">Baixar 512</button></div>
      </div>
    </div>

    <div style="margin-top:12px" class="note">
      Após baixar, mova os arquivos para a pasta: <code>LotoAnalise/icons/</code> com os nomes <code>icon-192.png</code> e <code>icon-512.png</code>.
    </div>
  </div>

<script>
function shade(col, amt){
  if(!/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(col)) return col;
  const n = parseInt(col.slice(1),16);
  let r=(n>>16)+amt, g=((n>>8)&0xff)+amt, b=(n&0xff)+amt;
  r=Math.max(0,Math.min(255,r)); g=Math.max(0,Math.min(255,g)); b=Math.max(0,Math.min(255,b));
  return '#'+((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1);
}

function drawIcon(canvas, text, bg, fg){
  const ctx = canvas.getContext('2d');
  const s = canvas.width;
  // fundo
  ctx.clearRect(0,0,s,s);
  ctx.fillStyle = bg; ctx.fillRect(0,0,s,s);
  // círculo sutil
  ctx.fillStyle = shade(bg, -12);
  ctx.beginPath(); ctx.arc(s/2, s/2, Math.floor(s*0.42), 0, Math.PI*2); ctx.fill();
  // monograma (duas letras)
  const letters = (text||'').trim().split(/\s+/).map(w=>w[0]).join('').slice(0,2).toUpperCase() || 'JB';
  ctx.fillStyle = fg;
  ctx.font = `bold ${Math.floor(s*0.38)}px system-ui,Segoe UI,Arial,sans-serif`;
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText(letters, s/2, s/2 + Math.floor(s*0.02));
}

function downloadCanvas(canvas, filename){
  const a = document.createElement('a');
  a.href = canvas.toDataURL('image/png');
  a.download = filename; a.click();
}

const c192 = document.getElementById('c192');
const c512 = document.getElementById('c512');
const texto = document.getElementById('texto');
const bg = document.getElementById('bg');
const fg = document.getElementById('fg');

function gerar(){
  drawIcon(c192, texto.value, bg.value, fg.value);
  drawIcon(c512, texto.value, bg.value, fg.value);
}

document.getElementById('gerar').addEventListener('click', gerar);
document.getElementById('dl192').addEventListener('click', ()=>downloadCanvas(c192,'icon-192.png'));
document.getElementById('dl512').addEventListener('click', ()=>downloadCanvas(c512,'icon-512.png'));

// inicial
gerar();
</script>
</body>
</html>
